<div class="form-header">
  <button class="btn-back" (click)="cancelar()">
    <img src="assets/icons/atras.png" alt="Volver">
  </button>

  <div class="header-title">
    <img src="assets/icons/mesa.png" class="header-icon" alt="Mesa">
    <div>
      <h2>{{ id ? 'Editar Mesa' : 'Nueva Mesa' }}</h2>
      <p>Completa la información de la mesa</p>
    </div>
  </div>
</div>

<hr>

<div class="form-card">

  <div class="form-group">
    <label>Restaurante *</label>
    <select [(ngModel)]="restauranteId" (change)="cargarZonas()" (blur)="touchedRestaurante = true" [class.input-error]="(submitted || touchedRestaurante) && !(restauranteId && restauranteId.trim())">
      <option value="">Seleccione...</option>
      <option *ngFor="let r of restaurantes" [value]="r.id">{{ r.nombre }}</option>
    </select>
    <small *ngIf="(submitted || touchedRestaurante) && !(restauranteId && restauranteId.trim())" class="error-text">Debe seleccionar un restaurante.</small>
    <small *ngIf="!((submitted || touchedRestaurante) && !(restauranteId && restauranteId.trim()))" class="help-text">Seleccione el restaurante al que pertenece la mesa</small>
  </div>

  <div class="form-group">
    <label>Zona *</label>
    <select [(ngModel)]="zonaId" (blur)="touchedZona = true" [class.input-error]="(submitted || touchedZona) && !(zonaId && zonaId.trim())">
      <option value="">Seleccione...</option>
      <option *ngFor="let z of zonasUnicas" [value]="z.id">{{ z.nombre }}</option>
    </select>
    <small *ngIf="(submitted || touchedZona) && !(zonaId && zonaId.trim())" class="error-text">Debe seleccionar una zona.</small>
    <small *ngIf="!((submitted || touchedZona) && !(zonaId && zonaId.trim()))" class="help-text">Seleccione la zona asignada a la mesa</small>
  </div>

  <div class="form-group">
    <label>Número *</label>
    <input type="text" [(ngModel)]="numero" (blur)="touchedNumero = true" [class.input-error]="(submitted || touchedNumero) && !(numero && numero.trim())">
    <small *ngIf="(submitted || touchedNumero) && !(numero && numero.trim())" class="error-text">El número es obligatorio.</small>
    <small *ngIf="!((submitted || touchedNumero) && !(numero && numero.trim()))" class="help-text">Número identificador de la mesa</small>
  </div>

  <div class="form-group">
    <label>Capacidad *</label>
    <input type="number" min="1" [(ngModel)]="capacidad" (blur)="touchedCapacidad = true" [class.input-error]="(submitted || touchedCapacidad) && (!(capacidad) || capacidad < 1)">
    <small *ngIf="(submitted || touchedCapacidad) && (!(capacidad) || capacidad < 1)" class="error-text">La capacidad debe ser al menos 1.</small>
    <small *ngIf="!((submitted || touchedCapacidad) && (!(capacidad) || capacidad < 1))" class="help-text">Cantidad de personas que caben en la mesa</small>
  </div>

  <div class="acciones">
    <button class="btn-cancelar" (click)="cancelar()">Cancelar</button>
    <button class="btn-guardar" (click)="guardar()">
      <img src="assets/icons/guardar.png" alt="">
      {{ id ? 'Actualizar Mesa' : 'Guardar Mesa' }}
    </button>
  </div>

</div>
