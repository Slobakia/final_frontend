<div class="reservas-container">
  <header class="page-header">
    <div class="header-info">
      <button class="btn-back" (click)="atras()">
        <img src="assets/icons/atras.png" alt="Volver">
      </button>
      <div class="header-icon-container">
        <img src="assets/icons/reserva.png" alt="Reservas" class="header-icon">
      </div>
      <div>
        <h1>Gesti√≥n de Reservas</h1>
        <p>Visualiza y administra todas las reservas</p>
      </div>
    </div>

    <button class="btn-nueva-reserva" (click)="nuevo()">
      + Nueva Reserva
    </button>
  </header>

  <section class="filtros-card">

    <div class="filtros-header">
      <img src="assets/icons/filtro.png" class="filtros-icon">
      <h3>Filtros</h3>
    </div>

    <div class="filtros-grid">

      <input 
        type="text" 
        class="input-buscar"
        placeholder="Buscar por nombre..."
        [(ngModel)]="searchTerm"
        (input)="aplicarFiltros()"
      >

      <select class="select" [(ngModel)]="filtroRestaurante" (change)="onChangeRestaurante()">
        <option value="">Todos los restaurantes</option>
        <option *ngFor="let r of restaurantes" [value]="r.id">{{ r.nombre }}</option>
      </select>

      <select class="select" [(ngModel)]="filtroZona" (change)="onChangeZona()">
        <option value="">Todas las zonas</option>
        <option *ngFor="let z of zonas" [value]="z.id">{{ z.nombre }}</option>
      </select>

      <div class="input-fecha-container">
        <img src="assets/icons/reserva.png">
        <input type="date" [(ngModel)]="filtroFecha" (change)="onChangeFecha()">
      </div>

    </div>

  </section>
  <section class="stats-grid">

    <div class="stat-card">
      <h4>Total Reservas</h4>
      <p class="stat-number">{{ reservas.length }}</p>
      <div class="icon-bg">
        <img src="assets/icons/reserva.png" class="stat-icon">
      </div>
    </div>

  </section>
  <section class="reserva-lista">

    <div class="reserva-card" *ngFor="let r of mostradas">

      <div class="reserva-fecha">
        <h2>{{ r.fecha | date:'dd' }}</h2>
        <p>{{ r.fecha | date:'MMM' }}</p>
        <span class="reserva-hora">{{ r.hora }}</span>
      </div>

      <div class="reserva-info">
        
        <h3 class="cliente">{{ r.nombreCliente }} {{ r.apellidoCliente }}</h3>
        <p class="telefono"> {{ r.telefono }}</p>

        <div class="info-grid">

          <div class="info-item">
            <div class="img-col">
              <img src="assets/icons/restaurante.png" alt="restaurante">
            </div>
            <div class="text-col">
              <label class="label-info">Restaurante</label>
              <span>{{ obtenerNombreRestaurante(r.restauranteId) }}</span>
            </div>
          </div>

          <div class="info-item">
            <div class="img-col">
              <img src="assets/icons/zona.png" alt="zona">
            </div>
            <div class="text-col">
              <label class="label-info">Zona</label>
              <span>{{ obtenerNombreZona(r.zonaId) }}</span>
            </div>
          </div>

          <div class="info-item">
            <div class="img-col">
              <img src="assets/icons/mesa.png" alt="mesa">
            </div>
            <div class="text-col">
              <label class="label-info">Mesa</label>
              <span>{{ obtenerMesa(r.mesaId) }}</span>
            </div>
          </div>

          <div class="info-item">
            <div class="img-col">
              <img src="assets/icons/personas.png" alt="personas">
            </div>
            <div class="text-col">
              <label class="label-info">Personas</label>
              <span>{{ r.cantidadPersonas }}</span>
            </div>
          </div>

        </div>

      </div>

      <!-- Acciones -->
      <div class="reserva-acciones">

        <button class="btn-editar" (click)="editar(r.id)">
          Editar
        </button>

        <button class="btn-cancelar" (click)="eliminar(r.id)">
          Eliminar
        </button>

      </div>

    </div>

    <div class="no-resultados" *ngIf="mostradas.length === 0">
      <div class="no-resultados-icon">
        <img src="assets/icons/reserva.png" alt="No reservas">
      </div>
      <p>No hay reservas con esos filtros.</p>
    </div>

  </section>

</div>
